<h1>System Activities</h1>

<table id="activity-list">
  <thead>
    <tr>
      <th>UUID</th>
      <th>Action</th>
      <th>Source</th>
      <th>Timestamp</th>
      <th>Parameters</th>
    </tr>
  </thead>
  <tbody>
    <% JSON.parse(Activities.to_json).reverse_each do |activity| %>
      <tr>
        <td><%= activity['uuid'] %></td>
        <td><%= activity['action'] %></td>
        <td><%= activity['source_name'] %></td>
        <td><%= Time.at(activity['created_at']).strftime('%Y-%m-%d %H:%M:%S') %></td>
        <td>
          <% if activity['opt'] && !activity['opt'].empty? %>
            <% activity['opt'].each do |key, value| %>
              <div><strong><%= key %>:</strong> <%= value.is_a?(Hash) ? value.to_json : value %></div>
            <% end %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
